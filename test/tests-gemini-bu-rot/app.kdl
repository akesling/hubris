app-name "tests-gemini-bu-rot"
target "thumbv8m.main-none-eabihf"
board "gemini-bu-rot-1"
chip "../../chips/lpc55"
stack-size 1400
kernel {
    crate-name "gemini-bu-rot"
    requires flash=32768 ram=4096
    features "itm"
}
output "bootloader_sram" {
    address 0x14000000
    size 0x8000
}
output "bootloader_flash" {
    address 0x0
    size 0x8000
}
output "bootloader_ram" {
    address 0x20000000
    size 0x4000
}
output "flash" {
    address 0x8000
    size 0x70000
    read
    execute
}
output "ram" {
    address 0x20004000
    size 0x3c000
    read
    write
}
signing {
    combined {
        method "ecc"
        priv-key "../../support/fake_certs/p256-private-key.der"
    }
    bootloader {
        method "rsa"
        priv-key "../../support/fake_certs/fake_private_key.pem"
        root-cert "../../support/fake_certs/fake_certificate.der.crt"
    }
}
bootloader {
    name "stage0"
    imagea-flash-start 32768
    imagea-flash-size 458752
    imagea-ram-start 536887296
    imagea-ram-size 245760
}

task "runner" {
    crate-name "test-runner"
    priority 0
    max-sizes flash=16384 ram=4096
    start
    features "itm"
}

task "suite" {
    crate-name "test-suite"
    priority 2
    max-sizes flash=65536 ram=4096
    start
    stack-size 2048
    task-slots "assist" "idol" "suite" "runner"
    config {
        foo "\"Hello, world\""
        bar 42
        baz {
            - 1
            - 2
            - 3
            - 4
        }
        tup {
            - {
                - 1
                - true
            }
            - {
                - 2
                - true
            }
            - {
                - 3
                - false
            }
        }
    }
}

task "assist" {
    crate-name "test-assist"
    priority 1
    max-sizes flash=16384 ram=4096
    start
    features "itm"
}

task "idol" {
    crate-name "test-idol-server"
    priority 1
    max-sizes flash=4096 ram=1024
    stack-size 1024
    start
}

task "idle" {
    crate-name "task-idle"
    priority 3
    max-sizes flash=256 ram=256
    stack-size 256
    start
}

